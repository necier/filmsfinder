(()=>{"use strict";var e={128:(e,a,t)=>{var s=t(751),o=t(641),l=t(33);const r={class:"navbar navbar-expand-lg navbar-dark bg-dark sticky-top"},n={class:"container"},i={class:"collapse navbar-collapse",id:"navbarSupportedContent"},A={class:"navbar-nav me-auto mb-2 mb-lg-0 align-items-center"},m={class:"nav-item"},c={key:0,class:"nav-item"},d={class:"nav-item"},u={class:"apple-search-group"},p={class:"navbar-nav mb-2 mb-lg-0 align-items-center"},k={class:"nav-item"},b={class:"nav-item"},v={class:"nav-item"},L={class:"nav-link"},f={class:"nav-item"},h={class:"container mt-4"};function y(e,a,t,y,g,w){const E=(0,o.g2)("router-link"),C=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("nav",r,[(0,o.Lk)("div",n,[(0,o.bF)(E,{to:"/",class:"navbar-brand"},{default:(0,o.k6)((()=>a[3]||(a[3]=[(0,o.eW)("FilmsFinder")]))),_:1}),a[9]||(a[9]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,o.Lk)("div",i,[(0,o.Lk)("ul",A,[(0,o.Lk)("li",m,[(0,o.bF)(E,{to:"/",class:"nav-link"},{default:(0,o.k6)((()=>a[4]||(a[4]=[(0,o.eW)("首页")]))),_:1})]),w.isAdmin?((0,o.uX)(),(0,o.CE)("li",c,[(0,o.bF)(E,{to:"/add-movie",class:"nav-link"},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.eW)("添加电影")]))),_:1})])):(0,o.Q3)("",!0),(0,o.Lk)("li",d,[(0,o.Lk)("form",{class:"ms-3",onSubmit:a[1]||(a[1]=(0,s.D$)(((...e)=>w.onSearch&&w.onSearch(...e)),["prevent"]))},[(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>g.keyword=e),class:"apple-search-input",type:"search",placeholder:"搜索电影","aria-label":"Search"},null,512),[[s.Jo,g.keyword]]),a[6]||(a[6]=(0,o.Lk)("button",{class:"apple-search-btn",type:"submit"},[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor"},[(0,o.Lk)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85zm-5.242.656a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"})])],-1))])],32)])]),(0,o.Lk)("ul",p,[g.user?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("li",v,[(0,o.Lk)("span",L,(0,l.v_)(g.user.username),1)]),(0,o.Lk)("li",f,[(0,o.Lk)("a",{href:"#",class:"nav-link",onClick:a[2]||(a[2]=(0,s.D$)(((...e)=>w.doLogout&&w.doLogout(...e)),["prevent"]))},"退出")])],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("li",k,[(0,o.bF)(E,{to:"/login",class:"nav-link"},{default:(0,o.k6)((()=>a[7]||(a[7]=[(0,o.eW)("登录")]))),_:1})]),(0,o.Lk)("li",b,[(0,o.bF)(E,{to:"/register",class:"nav-link"},{default:(0,o.k6)((()=>a[8]||(a[8]=[(0,o.eW)("注册")]))),_:1})])],64))])])])]),(0,o.Lk)("div",h,[(0,o.bF)(C)])])}var g=t(335);const w=g.A.create({baseURL:"/api",timeout:5e3,withCredentials:!0}),E=w;async function C(e){const a=await E.post("/auth/register",e);return a.data}async function U(e){const a=await E.post("/auth/login",e);return a.data}async function x(){const e=await E.post("/auth/logout");return e.data}async function M(){const e=await E.get("/auth/me");return e.data}const V={data(){return{user:null,keyword:""}},computed:{isAdmin(){return this.user&&"ADMIN"===this.user.userType}},async created(){try{this.user=await M()}catch{this.user=null}this.keyword=this.$route.query.keyword||""},methods:{async doLogout(){await x(),this.user=null,this.$router.push("/")},onSearch(){this.$router.push({path:"/",query:{keyword:this.keyword||void 0}})}}};var I=t(262);const O=(0,I.A)(V,[["render",y]]),S=O;var D=t(220);const F={class:"container"},J={class:"row row-cols-1 row-cols-md-3 g-4"},R={class:"ratio-2x3"},X=["src"],z={class:"card-body"},T={class:"card-title"},K={key:0,class:"mt-4 text-center"};function B(e,a,t,s,r,n){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("div",J,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.movies,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"col"},[(0,o.Lk)("div",{class:"card shadow card-hover-effect h-100",style:(0,l.Tr)({transform:`translateY(${t%3*60}px)`})},[(0,o.Lk)("div",R,[(0,o.Lk)("img",{src:e.posterUrl||r.placeholder,referrerpolicy:"no-referrer",alt:"电影海报"},null,8,X)]),(0,o.Lk)("div",z,[(0,o.Lk)("h5",T,(0,l.v_)(e.chineseName?e.chineseName+" - "+e.name:e.name),1),(0,o.bF)(i,{to:`/movie/${e.id}`,class:"btn btn-outline-primary btn-sm mt-2"},{default:(0,o.k6)((()=>a[0]||(a[0]=[(0,o.eW)("查看详情")]))),_:2},1032,["to"])])],4)])))),128))]),r.total>r.size?((0,o.uX)(),(0,o.CE)("div",K," 第 "+(0,l.v_)(r.page)+" 页 / 共 "+(0,l.v_)(Math.ceil(r.total/r.size))+" 页 ",1)):(0,o.Q3)("",!0)])}const q="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwcIBwgHBwgHBwcICA4HBwcHBw8IDQcNFhEXFxURGBMZHCggGB4lHhYVITEhJSkrLi4uFx8zODMtNygtLisBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIARMAtwMBIgACEQEDEQH/xAAaAAEBAQEBAQEAAAAAAAAAAAAABAMCBQEH/8QAMhABAAIBAgMFBgUFAQAAAAAAAAECEQMEITOCEhNBUVIUMWFykZIyoaKx4SJjcYHBU//EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD8yAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUbbRreJvfjGcRGcZTrtnyuqQca+3pFJtSOzNYzMZzmEj0tSJml4jjM1mIj/AEi9n1vR+qAdbbRjUmbW/DHDEcMyp7jR9EfWXO1palbReMTNsxxy2Bn3Gj6I+sncaPoj6y0AZ9xo+iPrJ3Gj6I+stAEW50Y08Wr+GeGJ44lgu3VLXrWKRmYtmeOE3s+t6P1QDbQ29JpFrx2ptGYjOMQ43OhWkRenCM4muc4VacTFKRPCYrETH+me75XVAIQAAAAAAAAAF2z5XVKFds+V1SDYc6kzWlrR74rMwj9q1fOv2guGO21LalbTbGYtiMRhsAAAAAMdzqW06xNcZm2OMZT+1avnX7QXMd5yuqGmnM2pW0++axMs93yp+aAQgAAAAAAAAALtnyuqUK7Z8rqkGmrEzp3iOMzSYiI8eCDutX0X+2XogMNpW1aWi0TWe1njGPBuAAAAAMN3W1qVisTae1nhGfBL3Wr6L/bL0QHOlExp0ieExSImPLgz3nK6obMd3yuqAQgAAAAAAAAALtnyuqUK7Z8rqkGt57NLWj3xWZhJ7Xf00/NVq8u/yT+zzuzb02+gLtvqzqVmZiIxOODVPsomKWzEx/V4/wCFAAAAAMtxqzp1iYiJzOOLD2u/pp+bTeRM0riJn+rw/wAJOzbyt9AelSe1Stp981iWW85XVDTS5dPkj9me85XVAIQAAAAAAAAAF2z5XVKFds+V1SDYfL27NbW9/ZibY803tn9v9f8AAKhnoaveVmez2cTj35aAAAAADPX1e7rE47WZx78MfbP7f6/4BUx3nKn5oa0t2q1t7u1EWx5Mt5yuqAQgAAAAAAAAALtnyuqUK7Z8rqkHety9T5J/Z5z1DEeUfQE+y/Bb5v8AigAAAAAT738Ffm/4jeoYjyj6A40eXp/JH7ON5yp+aGzHecrqgEIAAAAAAAAAC7Z8rqlCs2domk18YnOPgDe09ms2n3ViZYe109N/yabi0V0r58YmsfGXng9HS1Y1ImYiYxOOLtLsrRi1PHPaiPNUAAAADjV1Y04iZiZzOODL2unpv+T5vbRitPHPamPJID06z2qxaPdMRLLecrqh1t7RbSpjwiKz8JZ7y0RSK+MznHwBGAAAAAAAAAARMxOYmYnwmJwAPtrWtxtM2n4zl8ACJxxjh8Ydd7qeu/3y5Add7qeu/wB8ne6nrv8AfLkB13up67/fJ3up/wCl/vlyATOeM8Z8ZkAH2trV41maz5xOHyZmZzMzM+czkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//Z",Q={data(){return{movies:[],placeholder:q,total:0,page:1,size:24,keyword:""}},watch:{"$route.query.keyword":{handler(){this.page=1,this.fetchMovies()},immediate:!0}},methods:{async fetchMovies(){this.keyword=this.$route.query.keyword||"";try{const e=await E.get("/movies",{params:{page:this.page,keyword:this.keyword}});this.movies=e.data.movies,this.total=e.data.total,this.size=e.data.size}catch(e){alert("加载电影列表失败："+(e.response?.data||e.message))}}},created(){this.fetchMovies()}},Y=(0,I.A)(Q,[["render",B]]),_=Y,j={key:0,class:"container movie-detail"},W={class:"row mb-5"},$={class:"col-md-4"},Z=["src"],N={class:"col-md-8"},P={class:"mb-3"},H={class:"detail-item"},G={class:"value"},ee={class:"detail-item"},ae={class:"value"},te={class:"detail-item"},se={class:"value"},oe={class:"detail-item"},le={class:"value"},re={class:"detail-item"},ne={class:"value"},ie={class:"detail-item"},Ae=["href"],me={class:"detail-item"},ce={class:"value description"},de={key:0,class:"edit-section card mb-4"},ue={class:"card-body p-3"},pe={class:"download-links mb-5"},ke={class:"row g-3"},be={class:"card download-card"},ve={class:"card-body"},Le=["href"],fe={class:"text-muted d-block mt-1"},he={key:0,class:"mt-3"},ye={key:0,class:"mt-3"},ge={class:"comments-section"},we={class:"mb-4"},Ee={key:0},Ce={class:"card-body"},Ue={class:"comment-header"},xe={class:"rating"},Me={class:"text-muted"},Ve={class:"comment-content"},Ie={key:1,class:"empty-comments"},Oe={class:"comment-form card"},Se={class:"card-body"},De={class:"mb-3"},Fe=["value"],Je={class:"mb-3"};function Re(e,a,t,r,n,i){const A=(0,o.g2)("router-link");return n.movie?((0,o.uX)(),(0,o.CE)("div",j,[(0,o.Lk)("div",W,[(0,o.Lk)("div",$,[(0,o.Lk)("img",{src:n.movie.posterUrl||n.placeholder,referrerpolicy:"no-referrer",class:"img-fluid rounded-3 shadow",alt:"电影海报"},null,8,Z)]),(0,o.Lk)("div",N,[(0,o.Lk)("h1",P,(0,l.v_)(n.movie.name),1),(0,o.Lk)("div",H,[a[7]||(a[7]=(0,o.Lk)("span",{class:"label"},"中文译名：",-1)),(0,o.Lk)("span",G,(0,l.v_)(n.movie.chineseName),1)]),(0,o.Lk)("div",ee,[a[8]||(a[8]=(0,o.Lk)("span",{class:"label"},"上映年份：",-1)),(0,o.Lk)("span",ae,(0,l.v_)(n.movie.releaseYear),1)]),(0,o.Lk)("div",te,[a[9]||(a[9]=(0,o.Lk)("span",{class:"label"},"类型：",-1)),(0,o.Lk)("span",se,(0,l.v_)(n.movie.type),1)]),(0,o.Lk)("div",oe,[a[10]||(a[10]=(0,o.Lk)("span",{class:"label"},"语言：",-1)),(0,o.Lk)("span",le,(0,l.v_)(n.movie.language),1)]),(0,o.Lk)("div",re,[a[11]||(a[11]=(0,o.Lk)("span",{class:"label"},"时长：",-1)),(0,o.Lk)("span",ne,(0,l.v_)(n.movie.duration)+" 分钟",1)]),(0,o.Lk)("div",ie,[a[12]||(a[12]=(0,o.Lk)("span",{class:"label"},"IMDB：",-1)),(0,o.Lk)("a",{href:n.movie.imdbLink,target:"_blank"},(0,l.v_)(n.movie.imdbLink),9,Ae)]),(0,o.Lk)("div",me,[a[13]||(a[13]=(0,o.Lk)("span",{class:"label"},"简介：",-1)),(0,o.Lk)("div",ce,(0,l.v_)(n.movie.description),1)])])]),i.isAdmin?((0,o.uX)(),(0,o.CE)("div",de,[(0,o.Lk)("div",ue,[a[15]||(a[15]=(0,o.Lk)("h4",null,"修改信息",-1)),(0,o.bF)(A,{to:`/edit-movie/${n.movie.id}`,class:"btn btn-outline-primary btn-sm mt-2"},{default:(0,o.k6)((()=>a[14]||(a[14]=[(0,o.eW)("前往编辑")]))),_:1},8,["to"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",pe,[a[17]||(a[17]=(0,o.Lk)("h3",{class:"mb-3"},"下载链接",-1)),(0,o.Lk)("div",ke,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredLinks,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"col-md-4",key:e.id},[(0,o.Lk)("div",be,[(0,o.Lk)("div",ve,[(0,o.Lk)("a",{href:e.url,target:"_blank"},(0,l.v_)(e.url),9,Le),(0,o.Lk)("small",fe,"权限: "+(0,l.v_)(e.accessLevel),1)])])])))),128))]),i.isAdmin?((0,o.uX)(),(0,o.CE)("div",he,[(0,o.Lk)("button",{class:"btn btn-sm btn-outline-primary",onClick:a[0]||(a[0]=e=>n.showAddLink=!n.showAddLink)},(0,l.v_)(n.showAddLink?"取消添加":"添加下载链接"),1),n.showAddLink?((0,o.uX)(),(0,o.CE)("div",ye,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.newLink.url=e),placeholder:"链接 URL",class:"form-control mb-2"},null,512),[[s.Jo,n.newLink.url]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.newLink.accessLevel=e),class:"form-select mb-2"},a[16]||(a[16]=[(0,o.Lk)("option",{value:"VISITOR"},"访客",-1),(0,o.Lk)("option",{value:"USER"},"登录用户",-1),(0,o.Lk)("option",{value:"ADMIN"},"管理员",-1)]),512),[[s.u1,n.newLink.accessLevel]]),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:a[3]||(a[3]=(...e)=>i.addLink&&i.addLink(...e))},"确认添加")])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ge,[(0,o.Lk)("h3",we,"观众评论 ("+(0,l.v_)(n.comments.length)+")",1),n.comments.length>0?((0,o.uX)(),(0,o.CE)("div",Ee,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.comments,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"comment-card card mb-3"},[(0,o.Lk)("div",Ce,[(0,o.Lk)("div",Ue,[(0,o.Lk)("div",xe,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,(a=>(0,o.Lk)("span",{key:a,class:(0,l.C4)(["star",{filled:a<=e.rating}])},"★",2))),64))]),(0,o.Lk)("small",Me,(0,l.v_)(i.formatDateTime(e.createdAt)),1)]),(0,o.Lk)("p",Ve,(0,l.v_)(e.content),1)])])))),128))])):((0,o.uX)(),(0,o.CE)("div",Ie," 还没有评论，快来发表你的看法吧～ ")),(0,o.Lk)("div",Oe,[(0,o.Lk)("div",Se,[a[22]||(a[22]=(0,o.Lk)("h5",{class:"card-title"},"发表你的评论",-1)),(0,o.Lk)("form",{onSubmit:a[6]||(a[6]=(0,s.D$)(((...e)=>i.submitComment&&i.submitComment(...e)),["prevent"]))},[(0,o.Lk)("div",De,[a[19]||(a[19]=(0,o.Lk)("label",{class:"form-label"},"评分",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.newComment.rating=e),class:"form-select",required:""},[a[18]||(a[18]=(0,o.Lk)("option",{disabled:"",value:null},"请选择评分",-1)),((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,(e=>(0,o.Lk)("option",{value:e},(0,l.v_)(e)+" 星",9,Fe))),64))],512),[[s.u1,n.newComment.rating,void 0,{number:!0}]])]),(0,o.Lk)("div",Je,[a[20]||(a[20]=(0,o.Lk)("label",{class:"form-label"},"评论内容",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>n.newComment.content=e),class:"form-control",rows:"3",placeholder:"写下你的观后感...",required:""},null,512),[[s.Jo,n.newComment.content]])]),a[21]||(a[21]=(0,o.Lk)("button",{type:"submit",class:"btn btn-outline-primary"},"提交评论",-1))],32)])])])])):(0,o.Q3)("",!0)}const Xe={data(){return{movie:null,comments:[],links:[],user:null,showAddLink:!1,newLink:{url:"",accessLevel:"VISITOR"},newComment:{rating:null,content:""},placeholder:q}},computed:{isAdmin(){return this.user&&"ADMIN"===this.user.userType},filteredLinks(){return this.user?"USER"===this.user.userType?this.links.filter((e=>["VISITOR","USER"].includes(e.accessLevel))):this.links:this.links.filter((e=>"VISITOR"===e.accessLevel))}},async created(){const e=this.$route.params.id;this.user=await M().catch((()=>null)),await this.loadData(e)},methods:{async loadData(e){try{const[a,t,s]=await Promise.all([E.get(`/movies/${e}`),E.get(`/movies/${e}/comments`),E.get(`/movies/${e}/downloads`)]);this.movie=a.data,this.comments=t.data,this.links=s.data}catch(a){alert("加载失败："+(a.response?.data||a.message))}},formatDateTime(e){const a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleString(void 0,a)},async submitComment(){this.newComment.rating&&this.newComment.content?(await E.post(`/movies/${this.movie.id}/comments`,{...this.newComment}),this.newComment={rating:null,content:""},await this.loadData(this.movie.id)):alert("请填写完整信息")},async addLink(){await E.post(`/movies/${this.movie.id}/downloads`,this.newLink),this.newLink={url:"",accessLevel:"VISITOR"},this.showAddLink=!1,await this.loadData(this.movie.id)}}},ze=(0,I.A)(Xe,[["render",Re]]),Te=ze,Ke={class:"container"},Be={class:"mb-3"},qe={class:"mb-3"},Qe={class:"mb-3"},Ye={class:"mb-3"},_e={class:"mb-3"},je={class:"mb-3"},We={class:"mb-3"},$e={class:"mb-3"},Ze={class:"mb-3"};function Ne(e,a,t,l,r,n){return(0,o.uX)(),(0,o.CE)("div",Ke,[a[21]||(a[21]=(0,o.Lk)("h1",{class:"my-4"},"添加电影",-1)),(0,o.Lk)("form",{onSubmit:a[9]||(a[9]=(0,s.D$)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"])),class:"col-md-6"},[(0,o.Lk)("div",Be,[a[10]||(a[10]=(0,o.Lk)("label",{class:"form-label"},"电影原名",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.form.name=e),type:"text",class:"form-control",required:""},null,512),[[s.Jo,r.form.name]])]),(0,o.Lk)("div",qe,[a[11]||(a[11]=(0,o.Lk)("label",{class:"form-label"},"中文译名",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.form.chineseName=e),type:"text",class:"form-control"},null,512),[[s.Jo,r.form.chineseName]])]),(0,o.Lk)("div",Qe,[a[12]||(a[12]=(0,o.Lk)("label",{class:"form-label"},"上映年份",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>r.form.releaseYear=e),type:"number",class:"form-control",placeholder:"如 2023"},null,512),[[s.Jo,r.form.releaseYear,void 0,{number:!0}]])]),(0,o.Lk)("div",Ye,[a[14]||(a[14]=(0,o.Lk)("label",{class:"form-label"},"类型",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>r.form.type=e),class:"form-select"},a[13]||(a[13]=[(0,o.Fv)('<option value="">请选择</option><option value="FILM">电影</option><option value="DOCUMENTARY">纪录片</option><option value="TV_SERIES">电视剧</option><option value="SHORT">短片</option>',5)]),512),[[s.u1,r.form.type]])]),(0,o.Lk)("div",_e,[a[15]||(a[15]=(0,o.Lk)("label",{class:"form-label"},"语言",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>r.form.language=e),type:"text",class:"form-control",placeholder:"如 英语"},null,512),[[s.Jo,r.form.language]])]),(0,o.Lk)("div",je,[a[16]||(a[16]=(0,o.Lk)("label",{class:"form-label"},"片长（分钟）",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>r.form.duration=e),type:"number",class:"form-control"},null,512),[[s.Jo,r.form.duration,void 0,{number:!0}]])]),(0,o.Lk)("div",We,[a[17]||(a[17]=(0,o.Lk)("label",{class:"form-label"},"海报 URL",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>r.form.posterUrl=e),type:"url",class:"form-control"},null,512),[[s.Jo,r.form.posterUrl]])]),(0,o.Lk)("div",$e,[a[18]||(a[18]=(0,o.Lk)("label",{class:"form-label"},"简介",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>r.form.description=e),class:"form-control",rows:"3"},null,512),[[s.Jo,r.form.description]])]),(0,o.Lk)("div",Ze,[a[19]||(a[19]=(0,o.Lk)("label",{class:"form-label"},"IMDB 链接",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>r.form.imdbLink=e),type:"url",class:"form-control",placeholder:"https://www.imdb.com/title/..."},null,512),[[s.Jo,r.form.imdbLink]])]),a[20]||(a[20]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary"},"提交",-1))],32)])}const Pe={data(){return{form:{name:"",chineseName:"",releaseYear:null,type:"",language:"",duration:null,posterUrl:"",description:"",imdbLink:""}}},methods:{async submitForm(){try{await E.post("/movies",this.form),this.$router.push("/"),alert("添加成功")}catch(e){alert("添加失败："+(e.response?.data||e.message))}}}},He=(0,I.A)(Pe,[["render",Ne]]),Ge=He,ea={class:"container"},aa={class:"mb-3"},ta={class:"mb-3"},sa={class:"mb-3"},oa={class:"mb-3"},la={class:"mb-3"},ra={class:"mb-3"},na={class:"mb-3"},ia={class:"mb-3"},Aa={class:"mb-3"};function ma(e,a,t,l,r,n){return(0,o.uX)(),(0,o.CE)("div",ea,[a[21]||(a[21]=(0,o.Lk)("h1",{class:"my-4"},"编辑电影",-1)),(0,o.Lk)("form",{onSubmit:a[9]||(a[9]=(0,s.D$)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"])),class:"col-md-6"},[(0,o.Lk)("div",aa,[a[10]||(a[10]=(0,o.Lk)("label",{class:"form-label"},"电影原名",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.form.name=e),type:"text",class:"form-control",required:""},null,512),[[s.Jo,r.form.name]])]),(0,o.Lk)("div",ta,[a[11]||(a[11]=(0,o.Lk)("label",{class:"form-label"},"中文译名",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.form.chineseName=e),type:"text",class:"form-control"},null,512),[[s.Jo,r.form.chineseName]])]),(0,o.Lk)("div",sa,[a[12]||(a[12]=(0,o.Lk)("label",{class:"form-label"},"上映年份",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>r.form.releaseYear=e),type:"number",class:"form-control",placeholder:"如 2023"},null,512),[[s.Jo,r.form.releaseYear,void 0,{number:!0}]])]),(0,o.Lk)("div",oa,[a[14]||(a[14]=(0,o.Lk)("label",{class:"form-label"},"类型",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>r.form.type=e),class:"form-select"},a[13]||(a[13]=[(0,o.Fv)('<option value="">请选择</option><option value="FILM">电影</option><option value="DOCUMENTARY">纪录片</option><option value="TV_SERIES">电视剧</option><option value="SHORT">短片</option>',5)]),512),[[s.u1,r.form.type]])]),(0,o.Lk)("div",la,[a[15]||(a[15]=(0,o.Lk)("label",{class:"form-label"},"语言",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>r.form.language=e),type:"text",class:"form-control",placeholder:"如 英语"},null,512),[[s.Jo,r.form.language]])]),(0,o.Lk)("div",ra,[a[16]||(a[16]=(0,o.Lk)("label",{class:"form-label"},"片长（分钟）",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>r.form.duration=e),type:"number",class:"form-control"},null,512),[[s.Jo,r.form.duration,void 0,{number:!0}]])]),(0,o.Lk)("div",na,[a[17]||(a[17]=(0,o.Lk)("label",{class:"form-label"},"海报 URL",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>r.form.posterUrl=e),type:"url",class:"form-control"},null,512),[[s.Jo,r.form.posterUrl]])]),(0,o.Lk)("div",ia,[a[18]||(a[18]=(0,o.Lk)("label",{class:"form-label"},"简介",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>r.form.description=e),class:"form-control",rows:"3"},null,512),[[s.Jo,r.form.description]])]),(0,o.Lk)("div",Aa,[a[19]||(a[19]=(0,o.Lk)("label",{class:"form-label"},"IMDB 链接",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>r.form.imdbLink=e),type:"url",class:"form-control"},null,512),[[s.Jo,r.form.imdbLink]])]),a[20]||(a[20]=(0,o.Lk)("button",{type:"submit",class:"btn btn-primary"},"保存",-1))],32)])}const ca={data(){return{movieId:null,form:{name:"",chineseName:"",releaseYear:null,type:"",language:"",duration:null,posterUrl:"",description:"",imdbLink:""}}},async created(){this.movieId=this.$route.params.id;try{const e=await E.get(`/movies/${this.movieId}`);this.form={...e.data}}catch(e){alert("加载失败："+(e.response?.data||e.message)),this.$router.push("/")}},methods:{async submitForm(){try{await E.put(`/movies/${this.movieId}`,this.form),this.$router.push(`/movie/${this.movieId}`),alert("保存成功")}catch(e){alert("保存失败："+(e.response?.data||e.message))}}}},da=(0,I.A)(ca,[["render",ma]]),ua=da,pa={class:"col-md-4 offset-md-4"},ka={class:"mb-3"},ba={class:"mb-3"};function va(e,a,t,l,r,n){return(0,o.uX)(),(0,o.CE)("div",pa,[a[6]||(a[6]=(0,o.Lk)("h2",null,"登录",-1)),(0,o.Lk)("form",{onSubmit:a[2]||(a[2]=(0,s.D$)(((...e)=>n.doLogin&&n.doLogin(...e)),["prevent"]))},[(0,o.Lk)("div",ka,[a[3]||(a[3]=(0,o.Lk)("label",{class:"form-label"},"用户名",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.form.username=e),type:"text",class:"form-control",required:"",minlength:"5",maxlength:"20"},null,512),[[s.Jo,r.form.username]])]),(0,o.Lk)("div",ba,[a[4]||(a[4]=(0,o.Lk)("label",{class:"form-label"},"密码",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.form.password=e),type:"password",class:"form-control",required:"",pattern:"[A-Za-z0-9]{5,20}"},null,512),[[s.Jo,r.form.password]])]),a[5]||(a[5]=(0,o.Lk)("button",{class:"btn btn-primary"},"登录",-1))],32)])}const La={data(){return{form:{username:"",password:""}}},methods:{async doLogin(){try{await U(this.form),window.location.href="/",this.$router.push("/")}catch(e){alert("登录失败："+e.response.data||0)}}}},fa=(0,I.A)(La,[["render",va]]),ha=fa,ya={class:"col-md-4 offset-md-4"},ga={class:"mb-3"},wa={class:"mb-3"};function Ea(e,a,t,l,r,n){return(0,o.uX)(),(0,o.CE)("div",ya,[a[6]||(a[6]=(0,o.Lk)("h2",null,"注册",-1)),(0,o.Lk)("form",{onSubmit:a[2]||(a[2]=(0,s.D$)(((...e)=>n.doRegister&&n.doRegister(...e)),["prevent"]))},[(0,o.Lk)("div",ga,[a[3]||(a[3]=(0,o.Lk)("label",{class:"form-label"},"用户名",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.form.username=e),type:"text",class:"form-control",required:"",minlength:"5",maxlength:"20"},null,512),[[s.Jo,r.form.username]])]),(0,o.Lk)("div",wa,[a[4]||(a[4]=(0,o.Lk)("label",{class:"form-label"},"密码",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.form.password=e),type:"password",class:"form-control",required:"",pattern:"[A-Za-z0-9]{5,20}"},null,512),[[s.Jo,r.form.password]])]),a[5]||(a[5]=(0,o.Lk)("button",{class:"btn btn-primary"},"注册",-1))],32)])}const Ca={data(){return{form:{username:"",password:""}}},methods:{async doRegister(){try{const e=await C(this.form);alert(e),this.$router.push("/login")}catch(e){alert("注册失败："+e.response.data||0)}}}},Ua=(0,I.A)(Ca,[["render",Ea]]),xa=Ua,Ma=[{path:"/",component:_},{path:"/movie/:id",component:Te},{path:"/add-movie",component:Ge},{path:"/edit-movie/:id",component:ua},{path:"/login",component:ha},{path:"/register",component:xa}],Va=(0,D.aE)({history:(0,D.LA)(),routes:Ma}),Ia=Va;(0,s.Ef)(S).use(Ia).mount("#app")}},a={};function t(s){var o=a[s];if(void 0!==o)return o.exports;var l=a[s]={exports:{}};return e[s](l,l.exports,t),l.exports}t.m=e,(()=>{var e=[];t.O=(a,s,o,l)=>{if(!s){var r=1/0;for(m=0;m<e.length;m++){for(var[s,o,l]=e[m],n=!0,i=0;i<s.length;i++)(!1&l||r>=l)&&Object.keys(t.O).every((e=>t.O[e](s[i])))?s.splice(i--,1):(n=!1,l<r&&(r=l));if(n){e.splice(m--,1);var A=o();void 0!==A&&(a=A)}}return a}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[s,o,l]}})(),(()=>{t.d=(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};t.O.j=a=>0===e[a];var a=(a,s)=>{var o,l,[r,n,i]=s,A=0;if(r.some((a=>0!==e[a]))){for(o in n)t.o(n,o)&&(t.m[o]=n[o]);if(i)var m=i(t)}for(a&&a(s);A<r.length;A++)l=r[A],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(m)},s=self["webpackChunkfilmsfinder_frontend"]=self["webpackChunkfilmsfinder_frontend"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))})();var s=t.O(void 0,[504],(()=>t(128)));s=t.O(s)})();
//# sourceMappingURL=app.ba71cc48.js.map