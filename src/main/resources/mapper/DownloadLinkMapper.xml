<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.filmsfinder.mapper.DownloadLinkMapper">
    <resultMap id="linkResult" type="com.example.filmsfinder.domain.DownloadLink">
        <id     property="id"         column="id"/>
        <result property="movieId"    column="movie_id"/>
        <result property="url"        column="url"/>
        <result property="accessLevel" column="access_level"/>
    </resultMap>

    <select id="selectByMovieId" parameterType="long" resultMap="linkResult">
        SELECT * FROM download_link WHERE movie_id = #{movieId}
    </select>

    <insert id="insert" parameterType="com.example.filmsfinder.domain.DownloadLink">
        INSERT INTO download_link (movie_id, url, access_level)
        VALUES (#{movieId}, #{url}, #{accessLevel})
    </insert>
</mapper>